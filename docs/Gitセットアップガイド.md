# Gitプロジェクト作成手順書

この手順書では、`img-resizer`プロジェクトをGitで管理する方法を説明します。

## 前提条件

- Gitがインストールされていること
- PowerShellまたはコマンドプロンプトが使用できること
- （オプション）GitHubアカウント（リモートリポジトリを使用する場合）

## ローカルとリモートの順序について

**推奨順序：まずローカルで作業してから、リモートリポジトリ（GitHubなど）を作成**

1. **ローカルリポジトリ**：自分のパソコン上でGit管理を開始（`git init`）
2. **リモートリポジトリ**：GitHubなどのクラウド上にバックアップ用のリポジトリを作成

初心者の場合、まずローカルで作業に慣れてから、後でリモートリポジトリに接続することをおすすめします。

## ステップ1: ローカルGitリポジトリの初期化

プロジェクトディレクトリで以下のコマンドを実行します：

```bash
git init
```

このコマンドにより、`.git`フォルダが作成され、このディレクトリがGitリポジトリとして管理されます。

## ステップ2: .gitignoreファイルの作成

`.gitignore`ファイルを作成し、Gitで管理しないファイルを指定します。
C#プロジェクトでは、ビルド成果物や一時ファイルを除外します。

```bash
# .gitignoreファイルの内容は後述
```

## ステップ3: プロジェクトファイルの作成

C#プロジェクトファイル（`.csproj`）を作成します。

## ステップ4: 初回コミット

### 4-1. ファイルの状態を確認

```bash
git status
```

このコマンドで、変更されたファイルや追加されたファイルの状態を確認できます。

### 4-2. ファイルをステージングエリアに追加

```bash
git add .
```

このコマンドで、すべてのファイルをステージングエリア（コミット準備エリア）に追加します。
特定のファイルのみ追加する場合は：

```bash
git add ファイル名
```

### 4-3. 初回コミット

```bash
git commit -m "初回コミット: プロジェクトの初期設定"
```

`-m`オプションでコミットメッセージを指定します。コミットメッセージは、その変更の内容を説明するものです。

## ステップ5: リモートリポジトリ（GitHub）への接続（オプション）

ローカルでの作業に慣れたら、GitHubなどのリモートリポジトリに接続して、コードをバックアップ・共有できます。

### 5-1. GitHubでリポジトリを作成

1. [GitHub](https://github.com)にログイン
2. 右上の「+」ボタン → 「New repository」をクリック
3. リポジトリ名を入力（例：`img-resizer`）
4. 「Create repository」をクリック
5. 表示されるURLをコピー（例：`https://github.com/ユーザー名/img-resizer.git`）

### 5-2. リモートリポジトリを接続

このプロジェクトのリモートリポジトリURLは以下の通りです：

```bash
git remote add origin https://github.com/dendrobium0083/img-resizer.git
```

`origin`はリモートリポジトリの名前（通常は`origin`を使用）です。

接続を確認するには：

```bash
git remote -v
```

### 5-3. GitHub認証の設定（重要！）

GitHubは2021年8月からパスワード認証を廃止しています。**Personal Access Token (PAT)** が必要です。

#### Personal Access Tokenを作成する手順

1. [GitHub](https://github.com)にログイン
2. 右上のプロフィール画像をクリック → **Settings**
3. 左メニューの一番下 → **Developer settings**
4. **Personal access tokens** → **Tokens (classic)**
5. **Generate new token** → **Generate new token (classic)**
6. **Note**: 用途を記入（例：`img-resizer project`）
7. **Expiration**: 有効期限を選択
8. **Select scopes**: `repo` にチェック（リポジトリへのアクセス権限）
9. **Generate token** をクリック
10. **表示されたトークンをコピー**（重要：この画面を閉じると二度と表示されません）

### 5-4. リモートリポジトリにプッシュ（アップロード）

```bash
git branch -M main
git push -u origin main
```

**注意**: 現在のブランチが`master`の場合は、`main`に変更する必要があります。

プッシュ時に認証を求められたら：
- **ユーザー名**: GitHubのユーザー名を入力
- **パスワード**: 先ほどコピーした**Personal Access Token**を貼り付け

- `git branch -M main`：ブランチ名を`main`に変更（GitHubの標準）
- `git push -u origin main`：ローカルのコミットをリモートにアップロード

初回のみ`-u`オプションが必要です。2回目以降は`git push`だけでOKです。

#### 認証情報を保存する（オプション）

毎回トークンを入力するのが面倒な場合は：

```bash
git config --global credential.helper manager-core
```

これにより、次回から自動的に認証情報が使用されます。

## ステップ6: 基本的なGit操作

### 現在の状態を確認

```bash
git status
```

### 変更履歴を確認

```bash
git log
```

### ファイルを追加してコミット（通常の作業フロー）

```bash
# 1. ファイルを編集
# 2. 変更を確認
git status

# 3. 変更をステージング
git add .

# 4. コミット
git commit -m "変更内容の説明"
```

## よく使うGitコマンド一覧

| コマンド | 説明 |
|---------|------|
| `git init` | リポジトリを初期化 |
| `git status` | 現在の状態を確認 |
| `git add .` | すべての変更をステージング |
| `git add ファイル名` | 特定のファイルをステージング |
| `git commit -m "メッセージ"` | コミットを作成 |
| `git log` | コミット履歴を表示 |
| `git diff` | 変更内容を確認 |
| `git remote add origin URL` | リモートリポジトリを接続 |
| `git push` | リモートリポジトリにアップロード |
| `git pull` | リモートリポジトリからダウンロード |

## よくある質問

### Q: リモートリポジトリは必須ですか？

A: いいえ、必須ではありません。ローカルのみでGit管理することも可能です。ただし、リモートリポジトリを使うと：
- コードのバックアップになる
- 他のパソコンからアクセスできる
- 他の人と共有できる

### Q: リモートリポジトリを先に作ってもいいですか？

A: はい、可能です。その場合は：
1. GitHubでリポジトリを作成
2. `git clone URL`でクローンするか、既存のフォルダで`git remote add origin URL`を実行
3. ファイルを作成・編集
4. `git add .` → `git commit` → `git push`

## 次のステップ

1. 画像変換機能の実装
2. 定期的なコミット（機能追加ごと、バグ修正ごと）
3. ブランチの使用（機能開発用に分岐）

## 注意事項

- コミットメッセージは分かりやすく記述しましょう
- 定期的にコミットする習慣をつけましょう
- `.gitignore`で除外したファイルはGitで管理されません

